{% extends 'Backend/Master/Base.twig' %}

{% block title %}{{ NAME }} - {{ TITLE }}{% endblock %}

{% block head %}

    {{ parent() }}

    <link rel="stylesheet" href="{{ GLOBAL_COMPONENTS }}datatables/media/css/dataTables.bootstrap.min.css" type="text/css" />

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

    <link rel="stylesheet" href="{{ GLOBAL_COMPONENTS }}jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.css" type="text/css" />

{% endblock %}


{% block content %}


    {% if error %}

        {{ error }}

    {% endif %}

    <div id="page-wrapper">

        <div class="container{% if CONTENT_FLUID %}-fluid{% endif %}">

            {% if PERMISSION %}

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">

                        </h1>
                        <ol class="breadcrumb">
                            <li class="active">
                                <i class="fa fa-desktop"></i> Dashboard
                            </li>
                        </ol>
                    </div>
                </div>
                <!-- /.row -->

                {{ VARDUMP }}

                {% if PROVIDER == 'DEFAULT'%}

                    <div class="row">

                    <div class="col-lg-3 col-md-6">
                        <a href="{{ urlFor( 'patients' ) }}">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-group fa-5x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div class="huge">{{ PATIENT_COUNT }}</div>
                                        <div>Patients !</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        </a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <a href="{{ urlFor( 'dentists' ) }}">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-group fa-5x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div class="huge">{{ DENTIST_COUNT }}</div>
                                        <div>Dentists !</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </a>
                    </div>
                    <div class="col-lg-6 col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fa fa-clock-o fa-5x"></i>
                                        </div>
                                        <div class="col-xs-9 text-right">
                                            <div id="clock" class="huge"></div>
                                            <div class="datebar">
                                                <small>{{ dom.dueDate|date('D, Y-m-d') }}</small><br />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                    </div>



                </div>

                {% elseif ( PROVIDER == 'DCAS Dentist Registration' ) %}

                    <div class="row">

                        <div class="col-lg-3 col-md-6">
                            <a href="{{ urlFor( 'mailbox' ) }}">
                                <div class="panel panel-danger">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-envelope fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ UNREAD_MESSAGE_COUNT }}</div>
                                                <div>Unread Messages !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <div class="col-lg-3 col-md-6">
                            <a href="{{ urlFor( 'calendar' ) }}">
                                <div class="panel panel-warning">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-calendar fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ DENTIST_TODAY_APPOINTMENT_COUNT }}</div>
                                                <div>Today Appointments !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <div class="col-lg-6 col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fa fa-clock-o fa-5x"></i>
                                        </div>
                                        <div class="col-xs-9 text-right">
                                            <div id="clock" class="huge"></div>
                                            <div class="datebar">
                                                <small>{{ dom.dueDate|date('D, Y-m-d') }}</small><br />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>

                {% elseif ( PROVIDER == 'DCAS Patient Registration' ) %}

                    <div class="row">

                        <div class="col-lg-3 col-md-6">
                            <a href="{{ urlFor( 'mailbox' ) }}">
                                <div class="panel panel-danger">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-envelope fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ UNREAD_MESSAGE_COUNT }}</div>
                                                <div>Unread Messages !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <div class="col-lg-3 col-md-6">
                            <a href="{{ urlFor( 'calendar' ) }}">
                                <div class="panel panel-warning">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-calendar fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ PATIENT_TODAY_APPOINTMENT_COUNT }}</div>
                                                <div>Today Appointments !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <div class="col-lg-6 col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fa fa-clock-o fa-5x"></i>
                                        </div>
                                        <div class="col-xs-9 text-right">
                                            <div id="clock" class="huge"></div>
                                            <div class="datebar">
                                                <small>{{ dom.dueDate|date('D, Y-m-d') }}</small><br />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>

                {% endif %}

                {% if PROVIDER == 'DEFAULT' %}

                <hr>

                <div class="row">

                    <div class="col-lg-9">

                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Today Appointment Lists
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                <table class="table table-bordered table-hover" id="all-appointment-today">
                                    <thead>
                                    <tr>
                                        <th class="cbn-table-center" width="50%">Dentist</th>
                                        <th class="cbn-table-center" width="50%">Patient</th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% if ALL_DENTIST|length > 0 %}
                                        {% for dentist in ALL_DENTIST %}
                                            <tr>
                                                <td class="cbn-table-center" width="50%">
                                                    {% if dentist.avatar %}
                                                        {% if PROVIDER == 'DEFAULT'%}
                                                            <a href="{{ urlFor( 'dentists' ) }}{{ dentist.dentist_id }}"><img src="{{ PUBLIC_DIR }}avatars/dentists/{{ dentist.avatar }}" alt="" width="200px"></a>
                                                        {% else %}
                                                            <img src="{{ PUBLIC_DIR }}avatars/dentists/{{ dentist.avatar }}" alt="" width="200px">
                                                        {% endif %}
                                                    {% else %}
                                                        {% if PROVIDER == 'DEFAULT'%}
                                                            <a href="{{ urlFor( 'dentists' ) }}{{ dentist.dentist_id }}"><img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="200px"></a>
                                                        {% else %}
                                                            <img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="200px">
                                                        {% endif %}
                                                    {% endif %}
                                                    <hr>
                                                    <strong>#{{ NAME }} - {{ dentist.birthdate|replace({'-': ''}) }} - DDS{{ dentist.dentist_id|e }}</strong>
                                                    <br>
                                                    <strong>
                                                        {% if PROVIDER == 'DEFAULT'%}
                                                            <a href="{{ urlFor( 'dentists' ) }}{{ dentist.dentist_id }}">{% if dentist.last_name %}{{ dentist.last_name|e }}, {% endif %}{{ dentist.first_name|e }}</a>
                                                        {% else %}
                                                            {% if dentist.last_name %}{{ dentist.last_name|e }}, {% endif %}{{ dentist.first_name|e }}
                                                        {% endif %}
                                                        {% if dentist.specialties %}
                                                            <br>
                                                            <a class="label label-info">{{ dentist.specialties|e }}</a>
                                                        {% endif %}
                                                    </strong>
                                                </td>
                                                <td width="50%">
                                                    {% if ALL_TODAY_APPOINTMENT|length > 0 %}
                                                        {% for appointment in ALL_TODAY_APPOINTMENT %}
                                                            {% if appointment.dentist_id == dentist.dentist_id %}
                                                                <table class="table table-bordered">
                                                                    <tbody>
                                                                    <tr>
                                                                        <td class="cbn-table-center">
                                                                            {% if appointment.patient_avatar %}
                                                                                {% if PROVIDER == 'DEFAULT'%}
                                                                                    <a href="{{ urlFor( 'patients' ) }}{{ appointment.patient_id|e }}"><img src="{{ PUBLIC_DIR }}avatars/patients/{{ appointment.patient_avatar }}" alt="" width="80px"></a>
                                                                                {% else %}
                                                                                    <img src="{{ PUBLIC_DIR }}avatars/patients/{{ appointment.patient_avatar }}" alt="" width="80px">
                                                                                {% endif %}
                                                                            {% else %}
                                                                                {% if PROVIDER == 'DEFAULT'%}
                                                                                    <a href="{{ urlFor( 'patients' ) }}{{ appointment.patient_id|e }}"><img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="80px"></a>
                                                                                {% else %}
                                                                                    <img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="80px">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                            <hr>
                                                                            {% if PROVIDER == 'DEFAULT'%}
                                                                                <strong>#{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</strong> - <strong><a href="{{ urlFor( 'patients' ) }}{{ appointment.patient_id|e }}">{% if appointment.patient_lastname %}{{ appointment.patient_lastname|e }}, {% endif %}{{ appointment.patient_firstname|e }}</a></strong>
                                                                            {% else %}
                                                                                <strong>#{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</strong> - <strong>{% if appointment.patient_lastname %}{{ appointment.patient_lastname|e }}, {% endif %}{{ appointment.patient_firstname|e }}</strong>
                                                                            {% endif %}

                                                                            <br>
                                                                            <span class="label label-default">{{ appointment.type }}</span>
                                                                            {% if appointment.appointment_time %}

                                                                                <span class="label label-primary">{{ appointment.appointment_time }}</span>

                                                                            {% endif %}
                                                                            {% if appointment.cancelled == 1 %}

                                                                                <span class="label label-danger">CANCELLED</span>

                                                                            {% endif %}
                                                                            {% if appointment.finished == 1 %}
                                                                                <span class="label label-success">finished</span>
                                                                            {% endif %}
                                                                            {% if appointment.notes %}
                                                                                <hr>
                                                                                <p>{{ appointment.notes|raw }}</p>

                                                                            {% endif %}
                                                                            {% if ( user.user_id != ID and ROLE == 7 and PROVIDER == 'DEFAULT' ) %}
                                                                                <hr>
                                                                                {% if appointment.cancelled == 1 %}
                                                                                    <a href="#" role="button" class="btn btn-warning" data-toggle="modal" data-target="#undoAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Activate Appointment Data ?"><i class="fa fa-reply"></i></a>
                                                                                    {% if appointment.finished == 0 %}
                                                                                        <a href="#" role="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Delete Appointment Data ?"><i class="fa fa-trash"></i></a>
                                                                                    {% endif %}
                                                                                {% else %}
                                                                                    {% if appointment.finished == 0 and dom.dueDate|date('Y-m-d') == appointment.appointment_date %}
                                                                                        <a href="#" role="button" class="btn btn-success" data-toggle="modal" data-target="#finishAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Finish this Appointment Data ?"><i class="fa fa-check"></i></a>
                                                                                    {% else %}
                                                                                        <span class="button btn-block btn-success">FINISHED</span>
                                                                                    {% endif %}
                                                                                    {% if appointment.finished == 0 %}
                                                                                        <a href="#" role="button" class="btn btn-warning" data-toggle="modal" data-target="#cancelAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Cancel Appointment Data ?"><i class="fa fa-times"></i></a>
                                                                                    {% endif %}
                                                                                {% endif %}
                                                                            {% endif %}

                                                                        </td>

                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                                {% if ( user.user_id != ID and ROLE == 7 and PROVIDER == 'DEFAULT' ) %}

                                                                <!-- Finished Appointment Modal -->
                                                                <div class="modal fade" id="finishAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                                                <h4 class="modal-title" id="myModalLabel">Finish this Appointment : #{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</h4>
                                                                            </div>

                                                                            <form action="{{ urlFor( 'finishedPatientDentistAppointmentDashboardAction' ) }}" method="post" role="form">

                                                                                <div class="modal-body">

                                                                                    <div class="form-group">
                                                                                        <h5>Are you sure want to finished this appointment ?</h5>
                                                                                    </div>

                                                                                    <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">
                                                                                    <input type="hidden" name="notes_dentist" value="Finished by Dentist Assistant">

                                                                                </div>
                                                                                <div class="modal-footer">

                                                                                    <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                                                    <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                                                </div>

                                                                                <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                                            </form>

                                                                        </div>
                                                                        <!-- /.modal-content -->
                                                                    </div>
                                                                    <!-- /.modal-dialog -->
                                                                </div>
                                                                <!-- /.modal -->

                                                                <!-- Activated Appointment Modal -->
                                                                <div class="modal fade" id="undoAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                                                <h4 class="modal-title" id="myModalLabel">Activate Appointment : #{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</h4>
                                                                            </div>

                                                                            <form action="{{ urlFor( 'activatedPatientDentistAppointmentDashboardAction' ) }}" method="post" role="form">

                                                                                <div class="modal-body">

                                                                                    <div class="form-group">
                                                                                        <h5>Are you sure want to activated this appointment ?</h5>
                                                                                    </div>

                                                                                    <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                                                </div>
                                                                                <div class="modal-footer">

                                                                                    <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                                                    <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                                                </div>

                                                                                <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                                            </form>

                                                                        </div>
                                                                        <!-- /.modal-content -->
                                                                    </div>
                                                                    <!-- /.modal-dialog -->
                                                                </div>
                                                                <!-- /.modal -->

                                                                <!-- Cancelled Appointment Modal -->
                                                                <div class="modal fade" id="cancelAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                                                <h4 class="modal-title" id="myModalLabel">Cancel Appointment : #{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</h4>
                                                                            </div>

                                                                            <form action="{{ urlFor( 'cancelledPatientDentistAppointmentDashboardAction' ) }}" method="post" role="form">

                                                                                <div class="modal-body">

                                                                                    <div class="form-group">
                                                                                        <h5>Are you sure want to cancelled this appointment ?</h5>
                                                                                    </div>

                                                                                    <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                                                </div>
                                                                                <div class="modal-footer">

                                                                                    <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                                                    <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                                                </div>

                                                                                <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                                            </form>

                                                                        </div>
                                                                        <!-- /.modal-content -->
                                                                    </div>
                                                                    <!-- /.modal-dialog -->
                                                                </div>
                                                                <!-- /.modal -->

                                                                <!-- Deleted Appointment Modal -->
                                                                <div class="modal fade" id="deleteAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                                    <div class="modal-dialog">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                                                <h4 class="modal-title" id="myModalLabel">Delete Appointment : #{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</h4>
                                                                            </div>

                                                                            <form action="{{ urlFor( 'deletedPatientDentistAppointmentDashboardAction' ) }}" method="post" role="form">

                                                                                <div class="modal-body">

                                                                                    <div class="form-group">
                                                                                        <h5>Are you sure want to deleted this appointment ?</h5>
                                                                                    </div>

                                                                                    <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                                                </div>
                                                                                <div class="modal-footer">

                                                                                    <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                                                    <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                                                </div>

                                                                                <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                                            </form>

                                                                        </div>
                                                                        <!-- /.modal-content -->
                                                                    </div>
                                                                    <!-- /.modal-dialog -->
                                                                </div>
                                                                <!-- /.modal -->

                                                                    {% endif %}

                                                            {% endif %}
                                                        {% endfor %}
                                                    {% endif %}
                                                </td>

                                            </tr>

                                        {% endfor %}
                                    {% endif %}
                                    </tbody>
                                </table>

                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel -->

                    </div>

                    <div class="col-lg-3">

                        <div class="col-lg-12">
                            <a href="{{ urlFor( 'appointments' ) }}">
                                <div class="panel panel-success">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-check fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ FINISHED_APPOINTMENT_COUNT }}</div>
                                                <div>Finished Appointments !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-12">
                            <a href="{{ urlFor( 'appointments' ) }}">
                                <div class="panel panel-danger">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-times fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ CANCELLED_APPOINTMENT_COUNT }}</div>
                                                <div>Cancelled Appointments !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>

                        <div class="col-lg-12">
                            <a href="{{ urlFor( 'calendar' ) }}">
                                <div class="panel panel-warning">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-calendar fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">{{ TODAY_APPOINTMENT_COUNT }}</div>
                                                <div>Today Appointments !</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        {% if ( user.user_id != ID and ROLE == 7 and PROVIDER == 'DEFAULT' ) %}
                            <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <i class="fa fa-pencil"></i> Quick Add New Appointment
                                </div>
                                <!-- /.panel-heading -->
                                <div class="panel-body">

                                    <form id="quickAddAppointment" action="{{ urlFor( 'quickAddPatientDentistAppointmentAction' ) }}" method="post" role="form">
                                        <div class="modal-body">

                                            <div class="form-group">
                                                <label for="patient_id">Patient</label>
                                                <select name="patient_id" id="patient_id" class="form-control">
                                                    <option id="select_patient">- Select Patient -</option>
                                                    {% for patient in ALL_PATIENT %}
                                                        <option name="patient_id" id="patient_id" value="{{ patient.patient_id|e }}">{{ patient.first_name|e }} {{ patient.last_name|e }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                            <div id="appointment_type" class="form-group">
                                                <label for="type">Appointment Type</label>
                                                <select name="type" id="type" class="form-control">
                                                    <option value="New Appointment">New Appointment</option>
                                                    <option value="Recall Appointment">Recall Appointment</option>
                                                </select>
                                            </div>

                                            <div id="all_dentist" class="form-group">
                                                <label for="dentist_id">Dentist</label>
                                                <select name="dentist_id" id="dentist_id" class="form-control">
                                                    <option id="select_dentist">- Select Dentist -</option>
                                                    {% for dentist in ALL_DENTIST %}
                                                        <option name="dentist_id" id="dentist_id" value="{{ dentist.dentist_id|e }}">{{ dentist.first_name|e }} {{ dentist.last_name|e }} - {{ dentist.specialties|e }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                            <div id="dentist_time_table_ajax" class="form-group">
                                                <label for="timetable">Dentist Time Table</label>
                                                <div id="dentist_timetable"></div>
                                            </div>

                                            <div class="form-group">
                                                <div id="date_pick">
                                                    <label for="appointment_date_pick">Appointment Date</label>
                                                    <input id="appointment_date_pick" class="form-control" type="text" name="appointment_date_pick" required>
                                                </div>
                                            </div>

                                            <div id="dentist_day_selected"></div>

                                            <div id="appointment_notes" class="form-group">
                                                <label for="notes">Notes</label>
                                                <textarea name="notes" id="notes" class="form-control" placeholder="notes" style="height: 120px;" required></textarea>
                                            </div>

                                        </div>
                                        <div id="appointment_footer" class="modal-footer">

                                            <button type="submit" class="btn btn-success pull-left" onclick="return comestoarraAlert( '#quickAddAppointment', 'warning', '' );">Submit</button>
                                            <a onclick="reload()" class='btn btn-danger'>Cancel</a>

                                        </div>

                                        <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                    </form>


                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->
                        </div>
                        {% endif %}

                    </div>

                </div>

                {% elseif ( PROVIDER == 'DCAS Dentist Registration' ) %}

                    <hr>

                    <div class="row">

                        <div class="col-lg-12">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Today Appointment Lists
                                </div>
                                <!-- /.panel-heading -->
                                <div class="panel-body">
                                    <table class="table table-bordered table-hover" id="all-appointment-today">
                                        <thead>
                                        <tr>
                                            <th class="cbn-table-center" width="50%">Today Patient Lists</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                    {% if ALL_TODAY_APPOINTMENT|length > 0 %}
                                    {% for appointment in ALL_TODAY_APPOINTMENT %}
                                    {% if appointment.dentist_id == PROFILE_DENTIST['dentist_id'] %}
                                            <tr>
                                                <td class="cbn-table-center">
                                                    {% if appointment.patient_avatar %}
                                                        {% if PROVIDER == 'DEFAULT'%}
                                                            <a href="{{ urlFor( 'patients' ) }}{{ appointment.patient_id|e }}"><img src="{{ PUBLIC_DIR }}avatars/patients/{{ appointment.patient_avatar }}" alt="" width="80px"></a>
                                                        {% else %}
                                                            <img src="{{ PUBLIC_DIR }}avatars/patients/{{ appointment.patient_avatar }}" alt="" width="80px">
                                                        {% endif %}
                                                    {% else %}
                                                        {% if PROVIDER == 'DEFAULT'%}
                                                            <a href="{{ urlFor( 'patients' ) }}{{ appointment.patient_id|e }}"><img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="80px"></a>
                                                        {% else %}
                                                            <img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="80px">
                                                        {% endif %}
                                                    {% endif %}
                                                    <hr>
                                                    {% if PROVIDER == 'DEFAULT'%}
                                                        <strong>#{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</strong> - <strong><a href="{{ urlFor( 'patients' ) }}{{ appointment.patient_id|e }}">{% if appointment.patient_lastname %}{{ appointment.patient_lastname|e }}, {% endif %}{{ appointment.patient_firstname|e }}</a></strong>
                                                    {% else %}
                                                        <strong>#{{ NAME }} - {{ appointment.patient_birthdate|replace({'-': ''}) }} - P{{ appointment.patient_id|e }}</strong> - <strong>{% if appointment.patient_lastname %}{{ appointment.patient_lastname|e }}, {% endif %}{{ appointment.patient_firstname|e }}</strong>
                                                    {% endif %}

                                                    <br>
                                                    <span class="label label-default">{{ appointment.type }}</span>
                                                    {% if appointment.appointment_time %}

                                                        <span class="label label-primary">{{ appointment.appointment_time }}</span>

                                                    {% endif %}
                                                    {% if appointment.cancelled == 1 %}

                                                        <span class="label label-danger">CANCELLED</span>

                                                    {% endif %}
                                                    {% if appointment.finished == 1 %}
                                                        <span class="label label-success">finished</span>
                                                    {% endif %}
                                                    {% if appointment.notes %}
                                                        <hr>
                                                        <p>{{ appointment.notes|raw }}</p>

                                                    {% endif %}
                                                    <hr>
                                                    {% if appointment.cancelled == 1 %}
                                                        <a href="#" role="button" class="btn btn-warning" data-toggle="modal" data-target="#undoAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Activate Appointment Data ?"><i class="fa fa-reply"></i></a>
                                                    {% else %}
                                                        {% if appointment.finished == 0 and dom.dueDate|date('Y-m-d') == appointment.appointment_date %}
                                                            <a href="#" role="button" class="btn btn-success" data-toggle="modal" data-target="#finishAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Finish this Appointment Data ?"><i class="fa fa-check"></i></a>
                                                        {% else %}
                                                            <span class="button btn-block btn-success">FINISHED</span>
                                                        {% endif %}
                                                        {% if appointment.finished == 0 %}
                                                            <a href="#" role="button" class="btn btn-warning" data-toggle="modal" data-target="#cancelAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Cancel Appointment Data ?"><i class="fa fa-times"></i></a>
                                                        {% endif %}
                                                    {% endif %}

                                                </td>

                                            </tr>

                                        <!-- Finished Appointment Modal -->
                                        <div class="modal fade" id="finishAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                        <h4 class="modal-title" id="myModalLabel">Finish this Appointment : #{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</h4>
                                                    </div>

                                                    <form action="{{ urlFor( 'finishedPatientAppointmentByDentistAction' ) }}" method="post" role="form">

                                                        <div class="modal-body">

                                                            <div class="form-group">
                                                                <h5>Are you sure want to finished this appointment ?</h5>
                                                            </div>

                                                            <div id="notes_dentist" class="form-group">
                                                                <label for="notes_dentist">Notes</label>
                                                                <textarea name="notes_dentist" id="notes_dentist" class="form-control" placeholder="notes" style="height: 120px;">{{ appointment.notes_dentist|raw }}</textarea>
                                                            </div>

                                                            <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                        </div>
                                                        <div class="modal-footer">

                                                            <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                            <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                        </div>

                                                        <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                    </form>

                                                </div>
                                                <!-- /.modal-content -->
                                            </div>
                                            <!-- /.modal-dialog -->
                                        </div>
                                        <!-- /.modal -->

                                        <!-- Activated Appointment Modal -->
                                        <div class="modal fade" id="undoAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                        <h4 class="modal-title" id="myModalLabel">Activate Appointment : #{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</h4>
                                                    </div>

                                                    <form action="{{ urlFor( 'activatedPatientAppointmentByDentistAction' ) }}" method="post" role="form">

                                                        <div class="modal-body">

                                                            <div class="form-group">
                                                                <h5>Are you sure want to activated this appointment ?</h5>
                                                            </div>

                                                            <div id="notes_dentist" class="form-group">
                                                                <label for="notes_dentist">Notes</label>
                                                                <textarea name="notes_dentist" id="notes_dentist" class="form-control" placeholder="notes" style="height: 120px;">{{ appointment.notes_dentist|raw }}</textarea>
                                                            </div>

                                                            <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                        </div>
                                                        <div class="modal-footer">

                                                            <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                            <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                        </div>

                                                        <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                    </form>

                                                </div>
                                                <!-- /.modal-content -->
                                            </div>
                                            <!-- /.modal-dialog -->
                                        </div>
                                        <!-- /.modal -->

                                        <!-- Cancelled Appointment Modal -->
                                        <div class="modal fade" id="cancelAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                        <h4 class="modal-title" id="myModalLabel">Cancel Appointment : #{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</h4>
                                                    </div>

                                                    <form action="{{ urlFor( 'cancelledPatientAppointmentByDentistAction' ) }}" method="post" role="form">

                                                        <div class="modal-body">

                                                            <div class="form-group">
                                                                <h5>Are you sure want to cancelled this appointment ?</h5>
                                                            </div>

                                                            <div id="notes_dentist" class="form-group">
                                                                <label for="notes_dentist">Notes</label>
                                                                <textarea name="notes_dentist" id="notes_dentist" class="form-control" placeholder="notes" style="height: 120px;">{{ appointment.notes_dentist|raw }}</textarea>
                                                            </div>

                                                            <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                        </div>
                                                        <div class="modal-footer">

                                                            <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                            <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                        </div>

                                                        <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                    </form>

                                                </div>
                                                <!-- /.modal-content -->
                                            </div>
                                            <!-- /.modal-dialog -->
                                        </div>
                                        <!-- /.modal -->


                                    {% endif %}
                                    {% endfor %}
                                    {% endif %}
                                        </tbody>
                                    </table>

                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->

                        </div>

                    </div>

                {% elseif ( PROVIDER == 'DCAS Patient Registration' ) %}

                    <hr>

                    <div class="row">

                        <div class="col-lg-6">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Today Appointment Lists
                                </div>
                                <!-- /.panel-heading -->
                                <div class="panel-body">
                                    <table class="table table-bordered table-hover">
                                        <thead>
                                        <tr>
                                            <th class="cbn-table-center" width="50%">Today Appointment</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        {% if ALL_TODAY_APPOINTMENT|length > 0 %}
                                            {% for appointment in ALL_TODAY_APPOINTMENT %}
                                                {% if appointment.patient_id == PROFILE_PATIENT['patient_id'] %}
                                                    <tr>
                                                        <td class="cbn-table-center">
                                                            {% if appointment.dentist_avatar %}
                                                                <img src="{{ PUBLIC_DIR }}avatars/dentists/{{ appointment.dentist_avatar }}" alt="" width="200px">
                                                            {% else %}
                                                                <img src="{{ PUBLIC_DIR }}avatars/default.jpg" alt="" width="200px">
                                                            {% endif %}
                                                            <hr>
                                                            <strong>
                                                                {% if appointment.dentist_lastname %}{{ appointment.dentist_lastname|e }}, {% endif %}{{ appointment.dentist_firstname|e }}
                                                                {% if appointment.dentist_specialties %}
                                                                    <br>
                                                                    <a class="label label-info">{{ appointment.dentist_specialties|e }}</a>
                                                                {% endif %}
                                                            </strong>

                                                            <hr>
                                                            <span class="label label-default">{{ appointment.type }}</span>
                                                            {% if appointment.appointment_time %}

                                                                <span class="label label-primary">{{ appointment.appointment_time }}</span>

                                                            {% endif %}
                                                            {% if appointment.cancelled == 1 %}

                                                                <span class="label label-danger">CANCELLED</span>

                                                            {% endif %}
                                                            {% if appointment.finished == 1 %}
                                                                <span class="label label-success">finished</span>
                                                            {% endif %}
                                                            {% if appointment.notes %}
                                                                <hr>
                                                                <p>{{ appointment.notes|raw }}</p>

                                                            {% endif %}



                                                        </td>

                                                    </tr>

                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                        </tbody>
                                    </table>

                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->

                        </div>

                        <div class="col-lg-6">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Add New Appointment
                                </div>
                                <!-- /.panel-heading -->
                                <div class="panel-body">

                                    <form id="quickAddAppointment" action="{{ urlFor( 'quickAddPatientDentistAppointmentAction' ) }}" method="post" role="form">
                                        <div class="modal-body">

                                            <div id="appointment_type" class="form-group">
                                                <label for="type">Appointment Type</label>
                                                <select name="type" id="type" class="form-control">
                                                    <option value="New Appointment">New Appointment</option>
                                                    <option value="Recall Appointment">Recall Appointment</option>
                                                </select>
                                            </div>

                                            <div id="all_dentist" class="form-group">
                                                <label for="dentist_id">Dentist</label>
                                                <select name="dentist_id" id="dentist_id" class="form-control">
                                                    <option id="select_dentist">- Select Dentist -</option>
                                                    {% for dentist in ALL_DENTIST %}
                                                        <option name="dentist_id" id="dentist_id" value="{{ dentist.dentist_id|e }}">{{ dentist.first_name|e }} {{ dentist.last_name|e }} - {{ dentist.specialties|e }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                            <div id="dentist_time_table_ajax" class="form-group">
                                                <label for="timetable">Dentist Time Table</label>
                                                <div id="dentist_timetable"></div>
                                            </div>

                                            <div class="form-group">
                                                <div id="date_pick">
                                                    <label for="appointment_date_pick">Appointment Date</label>
                                                    <input id="appointment_date_pick" class="form-control" type="text" name="appointment_date_pick" required>
                                                </div>
                                            </div>

                                            <div id="dentist_day_selected"></div>

                                            <div id="appointment_notes" class="form-group">
                                                <label for="notes">Notes</label>
                                                <textarea name="notes" id="notes" class="form-control" placeholder="notes" style="height: 120px;" required></textarea>
                                            </div>

                                            <input type="hidden" name="patient_id" value="{{ PATIENT_ID }}">

                                        </div>
                                        <div id="appointment_footer" class="modal-footer">

                                            <button type="submit" class="btn btn-success pull-left" onclick="return comestoarraAlert( '#quickAddAppointment', 'warning', '' );">Submit</button>
                                            <a onclick="reload()" class='btn btn-danger'>Cancel</a>

                                        </div>

                                        <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                    </form>


                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->

                        </div>

                    </div>

                    <hr>

                    <div class="row">

                        <div class="col-lg-12">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    All Appointment Lists
                                </div>
                                <!-- /.panel-heading -->
                                <div class="panel-body">

                                    <table class="table table-striped table-bordered table-hover" id="all-patient-appointment">
                                        <thead>
                                        <tr>
                                            <th class="cbn-table-center" width="20%">#ID</th>
                                            <th class="cbn-table-center">Dentist</th>
                                            <th class="cbn-table-center">Schedule</th>
                                            <th class="cbn-table-center">Notes</th>
                                            <th class="cbn-table-center">Dentist Notes</th>
                                            <th class="cbn-table-center" width="12%">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if ALL_PATIENT_APPOINTMENT|length > 0 %}
                                            {% for appointment in ALL_PATIENT_APPOINTMENT %}
                                                <tr>
                                                    <td class="cbn-table-center" width="20%"><strong>#{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</strong><br>{% if appointment.cancelled == 1 %}<span class="label label-danger">cancelled</span>{% endif %}</td>
                                                    <td class="cbn-table-center">{{ appointment.dentist_firstname }} {{ appointment.dentist_lastname }} {% if appointment.dentist_specialties %}<a class="label label-info">{{ appointment.dentist_specialties|e }}</a>{% endif %}</td>
                                                    <td class="cbn-table-center">
                                                        <strong>{{ appointment.start|replace({'T': ' at '}) }}</strong>
                                                        <br>
                                                        <span class="label label-default">{{ appointment.type }}</span>
                                                        {% if dom.dueDate|date('Y-m-d') == appointment.appointment_date %}
                                                            {% if appointment.finished == 0 %}
                                                                <span class="label label-success">today</span>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if dom.dueDate|date('Y-m-d') > appointment.appointment_date %}
                                                            {% if appointment.finished == 1 %}
                                                                <span class="label label-success">finished</span>
                                                            {% else %}
                                                                <span class="label label-danger">expired</span>
                                                            {% endif %}
                                                        {% endif %}
                                                    </td>
                                                    <td>{{ appointment.notes|raw }}</td>
                                                    <td>{{ appointment.notes_dentist|raw }}</td>
                                                    <td class="cbn-table-center" width="12%">

                                                        {% if appointment.cancelled == 1 %}
                                                            <a href="#" role="button" class="btn btn-warning" data-toggle="modal" data-target="#undoAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Activate Appointment Data ?"><i class="fa fa-reply"></i></a>
                                                        {% else %}
                                                            {% if appointment.finished == 0 %}
                                                                <a href="#" role="button" class="btn btn-warning" data-toggle="modal" data-target="#cancelAppointment{{ appointment.appointment_id|e }}" rel="tooltip" data-placement="top" title="Cancel Appointment Data ?"><i class="fa fa-times"></i></a>
                                                            {% else %}
                                                                <span class="label label-success">FINISHED</span>
                                                            {% endif %}
                                                        {% endif %}

                                                    </td>
                                                </tr>


                                                <!-- Activated Appointment Modal -->
                                                <div class="modal fade" id="undoAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                                <h4 class="modal-title" id="myModalLabel">Activate Appointment : #{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</h4>
                                                            </div>

                                                            <form action="{{ urlFor( 'activatedPatientAppointmentAction' ) }}" method="post" role="form">

                                                                <div class="modal-body">

                                                                    <div class="form-group">
                                                                        <h5>Are you sure want to activated this appointment ?</h5>
                                                                    </div>

                                                                    <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                                </div>
                                                                <div class="modal-footer">

                                                                    <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                                    <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                                </div>

                                                                <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                            </form>

                                                        </div>
                                                        <!-- /.modal-content -->
                                                    </div>
                                                    <!-- /.modal-dialog -->
                                                </div>
                                                <!-- /.modal -->

                                                <!-- Cancelled Appointment Modal -->
                                                <div class="modal fade" id="cancelAppointment{{ appointment.appointment_id|e }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <a class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
                                                                <h4 class="modal-title" id="myModalLabel">Cancel Appointment : #{{ NAME }} - {{ appointment.created|replace({'-': '', ' ': '', ':': ''}) }} - {{ appointment.appointment_id|e }}</h4>
                                                            </div>

                                                            <form action="{{ urlFor( 'cancelledPatientAppointmentAction' ) }}" method="post" role="form">

                                                                <div class="modal-body">

                                                                    <div class="form-group">
                                                                        <h5>Are you sure want to cancelled this appointment ?</h5>
                                                                    </div>

                                                                    <input type="hidden" name="appointment_id" value="{{ appointment.appointment_id|e }}">

                                                                </div>
                                                                <div class="modal-footer">

                                                                    <a class="btn btn-danger" data-dismiss="modal">No</a>
                                                                    <button type="submit" class="btn btn-success pull-left">Yes</button>

                                                                </div>

                                                                <input type="hidden" name="{{ CSRF_TOKEN_NAME }}" value="{{ CSRF_TOKEN_VALUE }}"/>

                                                            </form>

                                                        </div>
                                                        <!-- /.modal-content -->
                                                    </div>
                                                    <!-- /.modal-dialog -->
                                                </div>
                                                <!-- /.modal -->


                                            {% endfor %}
                                        {% endif %}
                                        </tbody>
                                    </table>

                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->

                        </div>

                    </div>

                {% endif %}

            {% else %}

                <div class="col-lg-12" style="padding-top: 10px;">
                    <div class="panel panel-danger">
                        <div class="panel-heading">
                            SORRY !
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <p>Sorry, You are not allowed to be here !</p>
                            <a class="btn btn-default btn-lg btn-block" href="{{ LOGOUT }}" onclick="return comestoarraAlert('', 'warning', '{{ LOGOUT }}');"><i class="fa fa-fw fa-power-off"></i> Log Out</a>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>

            {% endif %}

        </div><!-- /.container-fluid -->

    </div><!-- /#page-wrapper -->

{% endblock %}

{% block footer %}

    {{ parent() }}

    {{  SCRIPT|raw }}

    <script type="text/javascript">

        $('.row').tooltip({
            selector: "[rel=tooltip]",
            container: "body"
        })

    </script>

    <!-- CLOCK -->
    <script type="text/javascript">
        function startTime() {
            var today=new Date(),
                    curr_hour=today.getHours(),
                    curr_min=today.getMinutes(),
                    curr_sec=today.getSeconds();
            curr_hour=checkTime(curr_hour);
            curr_min=checkTime(curr_min);
            curr_sec=checkTime(curr_sec);
            document.getElementById('clock').innerHTML=curr_hour+":"+curr_min+":"+curr_sec;
        }
        function checkTime(i) {
            if (i<10) {
                i="0" + i;
            }
            return i;
        }
        setInterval(startTime, 500);
    </script>
    <!-- END CLOCK -->

    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="{{ GLOBAL_COMPONENTS }}jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.js" type="text/javascript"></script>
    <script>
        $(document).ready(function() {

            $('.cbn-timepicker').timepicker({
                hourMin: 8,
                hourMax: 21,
                showMinute: false
            });

        });

    </script>
    <script type="text/javascript">
        $(document).ready(function(){


            $("#dentist_time_table_ajax").hide();
            $("#date_pick").hide();
            $("#time_pick").hide();
            $("#appointment_notes").hide();
            $("#appointment_footer").hide();



            $("#dentist_id").change(function(){
                $("#select_dentist").hide();
                $("#dentist_time_table_ajax").show();
                $("#date_pick").show().val('');
                $("#appointment_notes").show();
                $("#appointment_footer").show();
                $("#dentist_day_selected").hide().val('');
                var dentist_id=$("#dentist_id").val();
                $.ajax({
                    type: "post",
                    url: "{{ urlFor( 'patientAppointmentDentistTimeTable' ) }}",
                    data: "dentist_id=" + dentist_id,
                    success:function(data){
                        $("#dentist_timetable").html(data);
                    }
                });
            });

            $(function() {
                var dateToday = new Date();
                $( "#appointment_date_pick" ).datepicker({
                    dateFormat: 'yy-mm-dd',
                    changeMonth: true,
                    changeYear: true,
                    minDate: dateToday,
                    yearRange: '{{ "now"|date("Y") }}:{{ "now"|date("Y") + 1 }}',
                    onSelect: function() {
                        var date_appointment_selected = $(this).datepicker('getDate');
                        var day_parse = $.datepicker.formatDate('DD', date_appointment_selected);
                        var dentist_id = $("#dentist_id").val();
                        var appointment_date_pick = $("#appointment_date_pick").val();
                        $("#dentist_day_selected").show();
                        $.ajax({
                            type: "post",
                            url: "{{ urlFor( 'patientAppointmentDentistDayTimeTable' ) }}",
                            data: { dentist_id: dentist_id, day_parse: day_parse.toLowerCase(), appointment_date_pick: appointment_date_pick },
                            success:function(data){
                                $("#dentist_day_selected").html(data);
                            }
                        });
                    }
                });
            });

        });
    </script>

    <script src="{{ GLOBAL_COMPONENTS }}datatables/media/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="{{ GLOBAL_COMPONENTS }}datatables/media/js/dataTables.bootstrap.min.js" type="text/javascript"></script>
    <script>
        $(document).ready(function() {

            $('#all-appointment-today').DataTable({
                "responsive": true,
                "stateSave": true
            });

            $('#all-patient-appointment').DataTable({
                "responsive": true,
                "stateSave": true
            });

        });
    </script>

    <script src="{{ GLOBAL_COMPONENTS }}gritter/js/jquery.gritter.min.js" type="text/javascript"></script>
    {% if errors %}
        <script>
            $.gritter.add({
                // (string | mandatory) the heading of the notification
                title: '<i class="fa fa-meh-o"></i> Something went wrong !',
                // (string | mandatory) the text inside the notification
                text: "<i>{{ errors }}</i>",
                class_name: 'gritter-alert gritter-icon'
            });
        </script>
    {% endif %}

    {% if flash.error %}

        <script>
            $.gritter.add({
                // (string | mandatory) the heading of the notification
                title: '<i class="fa fa-meh-o"></i> Something went wrong !',
                // (string | mandatory) the text inside the notification
                text: "<i>{{ flash.error }}</i>",
                class_name: 'gritter-alert gritter-icon'
            });
        </script>

    {% endif %}

    {% if flash.info %}

        <script>
            $.gritter.add({
                // (string | mandatory) the heading of the notification
                title: '<i class="fa fa-smile-o"></i> Information !',
                // (string | mandatory) the text inside the notification
                text: "<i>{{ flash.info }}</i>",
                class_name: 'gritter-facebook gritter-icon'
            });
        </script>

    {% endif %}

    {% if flash.success %}

        <script>
            $.gritter.add({
                // (string | mandatory) the heading of the notification
                title: '<i class="fa fa-smile-o"></i> Congratulations !',
                // (string | mandatory) the text inside the notification
                text: "<i>{{ flash.success }}</i>",
                class_name: 'gritter-success gritter-icon'
            });
        </script>

    {% endif %}

{% endblock %}
